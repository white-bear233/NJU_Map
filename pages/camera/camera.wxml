<view class="container">
  <!-- 相机实时画面 -->
  <camera 
    class="camera" 
    device-position="back" 
    flash="on" 
    binderror="onCameraError" 
    bindinitdone="onCameraInitDone">
	<view class="flash-overlay" wx:if="{{isFlashing}}"></view>
  </camera>
  <view class="showBuildingData">
	<view class="demo-wrapper">
		<t-badge 
		count = "{{newBuilding ? 'NEW' : '0'}}"
		offset="{{ [-5, 3] }}" ariaRole="button" size = "medium">
			<t-button theme="primary" icon="building" shape="circle" size="medium" aria-label="建筑信息" bindtap="showBuildingInfo" class = "{{isLandscape ? (leftLandScape ? 'building_left' : 'building_right') : 'building_portrait'}}"></t-button>
		</t-badge>
	</view>
	</view>
  <view class="overlay" wx:if="{{showOverlay}}">
    <view class="info-window">
      <view class="info-header">
        <text>{{buildingInfo.name}}</text>
      </view>
      <view class="info-body">
        <text>{{buildingInfo.description}}</text>
      </view>
      <view class="info-footer">
        <t-button theme="primary" shape = "round" block bindtap="closeOverlay">关闭</t-button>
      </view>
    </view>
  </view>

  <view class="separator"></view>

  <!-- 定位状态 -->
  <view class="map_container">
    <map 
      class="map" 
      id="map" 
      longitude="{{longitude}}" 
      latitude="{{latitude}}" 
      scale="18" 
      show-location="true" 
	  polyline="{{polyline}}"
      markers="{{markers}}">
	  <t-button theme="primary" icon="camera" shape="circle" size="large" aria-label="拍照" bindtap="takePhoto" class = "{{isLandscape ? (leftLandScape ? 'take_photo_button_left' : 'take_photo_button_right') : 'take_photo_button_portrait'}}"></t-button>
    </map>
  </view>
</view>
